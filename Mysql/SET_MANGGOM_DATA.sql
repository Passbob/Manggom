USE MANGGOMDB;


DROP TABLE IF EXISTS MANAGER;
DROP TABLE IF EXISTS SALE_INFO;
DROP TABLE IF EXISTS USER_INFO;
DROP TABLE IF EXISTS PRODUCT;


CREATE TABLE IF NOT EXISTS PRODUCT
(
	PRODUCT_CODE INT PRIMARY KEY COMMENT '상품코드',
    PRODUCT_NAME VARCHAR(10) NOT NULL COMMENT '상품명',
    PRODUCT_COUNT INT NOT NULL COMMENT '상품개수',
    PRODUCT_PRICE INT NOT NULL COMMENT '상품가격'
) ENGINE=INNODB COMMENT '상품';

CREATE TABLE IF NOT EXISTS USER_INFO
(
	USER_NO INT AUTO_INCREMENT PRIMARY KEY COMMENT '사용자번호',
	USER_NAME VARCHAR(255) NOT NULL COMMENT '이름',
    USER_PHONE VARCHAR(13) NOT NULL COMMENT '전화번호',
    CUSTOMER_EMAIL VARCHAR(255) COMMENT '이메일',
	CUSTOMER_ADDR VARCHAR(255) NOT NULL COMMENT '주소'
) ENGINE=INNODB COMMENT '고객';

CREATE TABLE IF NOT EXISTS SALE_INFO
(
	SALE_NO INT AUTO_INCREMENT PRIMARY KEY COMMENT '판매번호',
    USER_NO INT COMMENT  '사용자번호',
    SALE_DATE DATE NOT NULL COMMENT '판매일자',
    PRODUCT_CODE INT COMMENT '상품코드',
    SALE_COUNT INT NOT NULL COMMENT '판매개수',
    SALE_PRICE INT NOT NULL COMMENT '판매액',
    CONSTRAINT FK_USER_NO FOREIGN KEY (USER_NO) REFERENCES USER_INFO (USER_NO) ON DELETE CASCADE,
    CONSTRAINT FK_PRODUCT_CODE FOREIGN KEY (PRODUCT_CODE) REFERENCES PRODUCT (PRODUCT_CODE) ON DELETE CASCADE
) ENGINE=INNODB COMMENT '구매정보';

CREATE TABLE IF NOT EXISTS MANAGER
(
	MANAGER_NO INT PRIMARY KEY COMMENT '매니저번호',
	MANAGER_CODE VARCHAR(8) NOT NULL COMMENT '매니저코드',
    CONSTRAINT FK_MANAGER_NO FOREIGN KEY (MANAGER_NO) REFERENCES USER_INFO (USER_NO)
) ENGINE=INNODB COMMENT '매니저';


INSERT INTO PRODUCT VALUES
(1, '티셔츠', 45, 30000),
(2, '키링', 50, 8000),
(3, '인형', 30, 20000),
(4, '담요', 46, 15000),
(5, '스티커', 45, 5000),
(6, '마우스', 5, 30000);

INSERT INTO USER_INFO VALUES
(0, '조형석', '010-4163-0989', NULL ,'서울시 강동구'),
(0, '홍길동', '010-1111-1111', NULL ,'율도시 도둑구'),
(0, '아이유', '010-2222-2222', NULL ,'서울시 감동 노래로 부르시길'),
(0, '서장훈', '010-3333-3333', NULL ,'서울시 금은동 농구로 따시길'),
(0, '제임스', '010-4444-4444', NULL ,'영국 첼시 런던동 블루로 돌아오길');

INSERT INTO SALE_INFO VALUES
(0, 4, '2024-10-01', 3, 5, 100000),
(0, 4, '2024-10-01', 6, 5, 150000),
(0, 3, '2024-10-02', 4, 4, 60000),
(0, 3, '2024-10-02', 3, 5, 100000),
(0, 3, '2024-10-03', 3, 5, 100000),
(0, 3, '2024-10-03', 3, 5, 100000),
(0, 3, '2024-10-04', 3, 5, 100000),
(0, 4, '2024-10-04', 1, 5, 150000),
(0, 4, '2024-10-04', 1, 5, 150000),
(0, 5, '2024-10-04', 5, 5, 25000),
(0, 5, '2024-10-04', 6, 5, 150000),
(0, 5, '2024-10-05', 1, 5, 150000);

INSERT INTO MANAGER VALUE
(1, 'CHO123'),
(2, 'HONG');






